HttpServer StaticFileServer:
  ENV:
    PATH: null
    PORT: 8080

Fork forkRequest:
  ENV.DISTRIBUTE: copy
   
Process orderMediaTypeFirst:
  COMMAND: node lib/orderMediaTypeFirst

# There don't seem to be reasons to have this configurable
# ENV.PICK: as_comes
Merge mergeResponse: {}

Process lookupMediaType:
  COMMAND: node lib/lookupMediaType

Process readFile:
  ENV.BASE_PATH: $staticBasePath
  COMMAND: node lib/readFile

Assign:
  $staticBasePath: StaticFileServer.ENV.PATH

Flow:
  - StaticFileServer -> forkRequest
  - forkRequest -> lookupMediaType -> mergeResponse
  - forkRequest -> readFile -> mergeResponse
  - mergeResponse -> orderMediaTypeFirst -> StaticFileServer
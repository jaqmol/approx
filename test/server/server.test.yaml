gateway Server:
  ENV:
    STATIC_PATH: null
    TIMEOUT: 10s
    PORT: 8080

# proc getMediaType:
#   COMMAND: node get-media-type.js

# proc combine:
#   COMMAND: node combine.js

proc readFile:
  ENV.BASE_PATH: $staticBasePath
  COMMAND: node read-file.js

# fork forkReq:
#   ENV.DISTRIBUTE: copy

# merge mergeResp: {}

assign:
  $staticBasePath: Server.ENV.STATIC_PATH

flow:
  - Server -> readFile -> Server

# flow:
#   - Server -> forkReq
#   - forkReq -> getMediaType -> mergeResp
#   - forkReq -> readFile -> mergeResp
#   - mergeResp -> combine -> Server
  